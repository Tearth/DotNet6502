<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DotNet6502: DotNet6502</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DotNet6502
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DotNet6502 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MOS 6502 emulator written for .NET Core platform. It implements all official operation codes and passes <a href="https://github.com/Klaus2m5/6502_65C02_functional_tests">Klaus' test suite</a>. At this point, this is just pure CPU emulation with <a class="el" href="namespace_r_a_m.html">RAM</a> and <a class="el" href="namespace_r_o_m.html">ROM</a> peripherals, and simple monitor app with debugger - but in the future, I'm going to create 6502-based computer emulators (like Commodore PET).</p>
<p>Documentation: <a href="https://tearth.github.io/DotNet6502">https://tearth.github.io/DotNet6502</a></p>
<p><b>What is done</b></p>
<ul>
<li>full MOS 6502 emulator with support for all official instructions, interrupts and bus operations</li>
<li><a class="el" href="namespace_host.html">Host</a> app which allows running emulation using command line parameters</li>
<li><a class="el" href="namespace_monitor.html">Monitor</a> app with debugger abilities</li>
</ul>
<p><b>TODO</b></p>
<ul>
<li>more peripherals, which allow emulating computers like Commodore PET</li>
<li>more debugger options (like editing memory content)</li>
</ul>
<h2>Projects overview</h2>
<h3>MOS 6502 emulator</h3>
<p>This is the core of the project. Contains the implementation of MOS 6502 emulator, where the most important parts are:</p>
<ul>
<li><a href="./M6502/Mos6502Emulator.cs">Entry emulator class</a></li>
<li><a href="./M6502/Mos6502Core.cs">Entry core class</a></li>
<li><a href="./M6502/InstructionDecode/InstructionDecoder.cs">Instruction decoder</a></li>
<li><a href="./M6502/InstructionDecode/">Instructions</a></li>
<li><a href="./M6502/Interrupts/">Interrupts</a></li>
<li><a href="./M6502/IO/">Bus</a></li>
</ul>
<h3><a class="el" href="namespace_host.html">Host</a></h3>
<p>This app allows running MOS 6502 emulator using a set of the command line options.</p>
<p>``` -f, &ndash;frequency Required. Set processor frequency (Hz). -d, &ndash;debugger (Default: false) Enable or disable debugger server. -p, &ndash;port (Default: 6502) Set debugger server port. -w, &ndash;wait (Default: false) Wait for debugger (set RDY pin to 0). -i, &ndash;info (Default: false) Display debug information. -b Add peripheral device. &ndash;help Display this help screen. &ndash;version Display version information. ```</p>
<p>Adding peripheral devices is a bit tricky due to format of an argument. For example, <code>-b <a class="el" href="namespace_r_a_m.html">RAM</a>[0x0000, 0x7FFF, image.bin]</code> means: load RAM.dll library, find class which implements IDevice interface, create its instance and pass arguments 0x0000, 0x7FFF and image.bin. Actually, there are two devices ready to use:</p>
<ul>
<li><a href="./Peripherals/RAM/">RAM</a> - Random Access Memory. Arguments:<ul>
<li>Start address of the memory</li>
<li>End address of the memory</li>
<li>Image to load (optional)</li>
</ul>
</li>
<li><a href="./Peripherals/ROM/">ROM</a> - Read Only Memory. Arguments:<ul>
<li>Start address of the memory</li>
<li>End address of the memory</li>
<li>Image to load (optional)</li>
</ul>
</li>
</ul>
<p>Example of running emulator with 1 MHz frequency, debugger enabled (and waiting for command), <a class="el" href="namespace_r_a_m.html">RAM</a> present at address 0x0000-0x7FFF, 7 ROMs presents at address 0xC000-0xFFFF (excluding 0xE800-0xEFFF) with loaded parts of the Commodore PET images. ``` dotnet Host.dll -f 1000000 -d -w -b <a class="el" href="namespace_r_a_m.html">RAM</a>[0x0000, 0x7FFF] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xC000, 0xC7FF, ROMS/pet-2001-basic1-1.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xC800, 0xCFFF, ROMS/pet-2001-basic1-2.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xD000, 0xD7FF, ROMS/pet-2001-basic1-3.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xD800, 0xDFFF, ROMS/pet-2001-basic1-4.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xE000, 0xE7FF, ROMS/pet-2001-basic1-5.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xF000, 0xF7FF, ROMS/pet-2001-basic1-6.bin] -b <a class="el" href="namespace_r_o_m.html">ROM</a>[0xF800, 0xFFFF, ROMS/pet-2001-basic1-7.bin] ```</p>
<div class="image">
<img src="https://i.imgur.com/S3M66IH.png"  alt="Host screenshot example"/>
</div>
<h3><a class="el" href="namespace_monitor.html">Monitor</a></h3>
<p>The <a class="el" href="namespace_monitor.html">Monitor</a> allows viewing registers, memory, and pins of emulated MOS 6502 during its work. It's also possible to use basic debugger commands like stepping by cycle or instructions. This is the only app that is not written in .NET Core, so it will work only on Windows (because of used WPF).</p>
<div class="image">
<img src="https://i.imgur.com/F4RcQR6.png"  alt="Monitor screenshot example"/>
</div>
<h3><a class="el" href="namespace_protocol.html">Protocol</a></h3>
<p>This project contains a set of classes used to implement custom debugger protocol shared by the client and the server. Every packet contains 5-bytes header (signature with 0x6502 value, length, type) and one byte with a checksum (simple XOR of all bytes in the packet) at the end.</p>
<table class="doxtable">
<tr>
<th></th><th>Signature </th><th>Length </th><th>Type </th><th>Data </th><th>Checksum  </th></tr>
<tr>
<td><b>Type</b> </td><td>ushort </td><td>ushort </td><td>byte </td><td>byte[n] </td><td>byte </td></tr>
<tr>
<td><b>Length</b> </td><td>2 </td><td>2 </td><td>1 </td><td>n </td><td>1 </td></tr>
</table>
<p>This project contains three main categories of packets: requests, responses, and commands. Requests and responses are used together to transport data between the client and the server. Commands are desired to be used one-way, so they only inform another side that some action is required to process.</p>
<table class="doxtable">
<tr>
<th>Requests </th><th>Length </th><th>Fields  </th></tr>
<tr>
<td>Cycles Request </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Memory Request </td><td>11 </td><td>Header + Address (2 bytes) + Length (2 bytes) + Tag (1 byte) + Checksum </td></tr>
<tr>
<td>Pins Request </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Registers Request </td><td>6 </td><td>Header + Checksum </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Responses </th><th>Length </th><th>Fields  </th></tr>
<tr>
<td>Cycles Response </td><td>14 </td><td>Header + Cycles count (8 bytes) + Checksum </td></tr>
<tr>
<td>Memory Response </td><td>11 + n </td><td>Header + Address (2 bytes) + Length (2 bytes) + Tag (1 byte) + Data (n bytes) + Checksum </td></tr>
<tr>
<td>Pins Response </td><td>10 </td><td>Header + Address Pins (2 byte) + Data Pins (1 bytes) + Other Pins (1 byte) + Checksum </td></tr>
<tr>
<td>Registers Response </td><td>13 </td><td>Header + Program Counter (2 bytes) + Stack Pointer (1 byte) + Accumulator (1 byte) + X Index Register (1 byte) + Y Index Register (1 byte) + Flags (1 byte) + Checksum </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Commands </th><th>Length </th><th>Fields  </th></tr>
<tr>
<td>Continue Command </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Next Cycle Command </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Next Instruction Command </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Run To Address Command </td><td>8 </td><td>Header + Address (2 bytes) + Checksum </td></tr>
<tr>
<td>Run Until Loop Command </td><td>6 </td><td>Header + Checksum </td></tr>
<tr>
<td>Stop Command </td><td>6 </td><td>Header + Checksum </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
